#
# Simplified WireGuard configuration
# nftables rules are in /etc/nftables.conf
# Custom proto: prague-wg (see /etc/iproute2/rt_protos)
#
[Interface]
Address = 10.14.0.2/16
PrivateKey = **************************************** # REDACTED
MTU = 1380
Table = off
FwMark = 0x100000

# PostUp: Only routing rules (nftables rules are in /etc/nftables.conf)
PostUp = /bin/sh -c "ip rule add fwmark 0x00100000/0x00ff0000 lookup main priority 105 || true; ip rule add from 192.168.54.0/24 table prague priority 5260 || true; ip route add default dev prague0 proto prague-wg metric 600 table prague || true; "

# PostDown: Clean up routing rules
PostDown = /bin/sh -c "ip rule delete fwmark 0x00100000/0x00ff0000 2>/dev/null || true; ip rule delete from 192.168.54.0/24 table prague 2>/dev/null || true; ip route delete default dev prague0 proto prague-wg table prague 2>/dev/null || true"

[Peer]
PublicKey = c1bfP+OBTj6WUe8NDH8d6nDTwpQicopfdkHFx3BIaSk=
AllowedIPs = 0.0.0.0/0
#Endpoint = 185.152.64.165:51820
Endpoint = cz-prg.prod.surfshark.com:51820
